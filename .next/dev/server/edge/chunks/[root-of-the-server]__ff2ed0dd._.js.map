{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/app/api/summary/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\r\nimport { Readable } from 'stream'\r\nimport OpenAI from 'openai'\r\n\r\nexport const runtime = 'edge'\r\n\r\nexport async function POST(req: NextRequest) {\r\n  const data = await req.formData()\r\n  const file = data.get('file') as File\r\n  const text = await file.text()\r\n  // 要約プロンプト\r\n  const prompt = `\r\nあなたは法律専門家であり、実務家や法科大学院生向けに判例要約を作成するAIです。\r\n以下の判決文を分析し、最新判例の要旨を簡潔に整理してください。\r\n\r\n1. 事案の概要（誰が・何を・どのように訴えたのか）\r\n2. 主要な法的論点\r\n3. 最高裁の判断の詳細\r\n4. 判例の意義\r\n\r\n**出力形式:**\r\n- 事案の概要:\r\n- 主要な法的論点:\r\n- 最高裁の判断:\r\n- 判例の意義:\r\n\r\n判決文:\r\n${text}\r\n  `\r\n  const openai = new OpenAI({ apiKey: process.env.OPENAI_API_KEY })\r\n  const completion = await openai.chat.completions.create({\r\n    model: 'gpt-4-1106-preview', // gpt-4.1リリース時点のAPI名\r\n    messages: [{ role: 'user', content: prompt }],\r\n    max_tokens: 2048, // 必要に応じ調整\r\n    temperature: 0\r\n  })\r\n  return NextResponse.json({ result: completion.choices[0]?.message?.content })\r\n}"],"names":[],"mappings":";;;;;;AAAA;AAAA;AAEA;AAAA;;;AAEO,MAAM,UAAU;AAEhB,eAAe,KAAK,GAAgB;IACzC,MAAM,OAAO,MAAM,IAAI,QAAQ;IAC/B,MAAM,OAAO,KAAK,GAAG,CAAC;IACtB,MAAM,OAAO,MAAM,KAAK,IAAI;IAC5B,UAAU;IACV,MAAM,SAAS,CAAC;;;;;;;;;;;;;;;;AAgBlB,EAAE,KAAK;EACL,CAAC;IACD,MAAM,SAAS,IAAI,2LAAM,CAAC;QAAE,QAAQ,QAAQ,GAAG,CAAC,cAAc;IAAC;IAC/D,MAAM,aAAa,MAAM,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;QACtD,OAAO;QACP,UAAU;YAAC;gBAAE,MAAM;gBAAQ,SAAS;YAAO;SAAE;QAC7C,YAAY;QACZ,aAAa;IACf;IACA,OAAO,kMAAY,CAAC,IAAI,CAAC;QAAE,QAAQ,WAAW,OAAO,CAAC,EAAE,EAAE,SAAS;IAAQ;AAC7E"}}]
}